import { useState, useEffect } from 'react'
import Navbar from '../components/Navbar'
import { useTheme } from '../contexts/ThemeContext'
import { api } from '../services/api'
import { showNotification } from '../utils/api'

interface UserStats {
  id: number
  user_id: number
  total_matches: number
  wins: number
  draws: number
  losses: number
  mvp_count: number
  best_goal_count: number
  best_save_count: number
  total_goals: number
  total_saves: number
  last_match_date?: string
}

// Тип для Telegram Web App
declare global {
  interface Window {
    Telegram?: {
      WebApp: {
        initData: string
        initDataUnsafe: {
          user?: {
            id: number
            first_name: string
            last_name?: string
            username?: string
            language_code?: string
          }
        }
        ready: () => void
      }
    }
  }
}

export default function MyProfile() {
  const { isDarkMode, toggleTheme } = useTheme()
  const [stats, setStats] = useState<UserStats | null>(null)
  const [loading, setLoading] = useState(true)
  const [username, setUsername] = useState<string>('@username') // Начальное значение

  useEffect(() => {
    // Получаем данные пользователя из Telegram
    const tg = window.Telegram?.WebApp
    if (tg) {
      tg.ready()
      const user = tg.initDataUnsafe.user
      if (user?.username) {
        setUsername(`@${user.username}`)
      } else if (user?.first_name) {
        setUsername(user.first_name)
      }
    }

    loadStats()
  }, [])

  const loadStats = async () => {
    try {
      setLoading(true)
      const data = await api.getUserStats()
      setStats(data)
    } catch (error) {
      console.error('Error loading user stats:', error)
      showNotification('Ошибка загрузки статистики', 'error')
    } finally {
      setLoading(false)
    }
  }

  const calculateWinRate = () => {
    if (!stats) return 0
    const totalGames = stats.losses + stats.wins
    if (totalGames === 0) return 0
    // Формула: wins/(losses+wins)*100 с округлением вверх
    return Math.ceil((stats.wins / totalGames) * 100)
  }

  if (loading) {
    return (
      <div
        className={`w-full items-center flex flex-col gap-[12px] bg-[#fff] dark:bg-[#1A1F25] min-h-screen overflow-y-auto`}
      >
        <div className='w-full border-b border-b-[2px] border-[#C3C3C3] dark:border-[#575757] py-[20px]'>
          <h3 className='text-[24px] text-[#000] dark:text-[#fff] px-[16px] roboto font-bold'>
            Профиль
          </h3>
        </div>
        <div className='pt-[28px] w-[372px] max-h-[calc(100vh-73px-73px-28px)] overflow-y-auto flex items-center justify-center'>
          <div className='text-[#000] dark:text-[#fff] text-[1.2rem]'>
            Загрузка статистики...
          </div>
        </div>
        <Navbar />
      </div>
    )
  }

  if (!stats) {
    return (
      <div
        className={`w-full items-center flex flex-col gap-[12px] bg-[#fff] dark:bg-[#1A1F25] min-h-screen overflow-y-auto`}
      >
        <div className='w-full border-b border-b-[2px] border-[#C3C3C3] dark:border-[#575757] py-[20px]'>
          <h3 className='text-[24px] text-[#000] dark:text-[#fff] px-[16px] roboto font-bold'>
            Профиль
          </h3>
        </div>
        <div className='pt-[28px] w-[372px] max-h-[calc(100vh-73px-73px-28px)] overflow-y-auto flex flex-col items-center justify-center'>
          <div className='text-[#000] dark:text-[#fff] text-[1.1rem] opacity-80'>
            Статистика недоступна
          </div>
        </div>
        <Navbar />
      </div>
    )
  }

  return (
    <div
      className={`w-full items-center flex flex-col gap-[12px] bg-[#fff] dark:bg-[#1A1F25] min-h-screen overflow-y-auto`}
    >
      <div className='w-full border-b border-b-[2px] border-[#C3C3C3] dark:border-[#575757] py-[20px]'>
        <h3 className='text-[24px] text-[#000] dark:text-[#fff] px-[16px] roboto font-bold'>
          Профиль
        </h3>
      </div>
      <div className='pt-[28px] w-[372px] max-h-[calc(100vh-73px-73px-28px)] overflow-y-auto'>
        <div className='relative flex items-center mb-[6px]'>
          {isDarkMode ? (
            <img
              src='/bg2.png'
              alt=''
              className='w-[333px] h-[40px] top-0 absolute left-0 z-0'
            />
          ) : (
            <img
              src='/bg.png'
              alt=''
              className='w-[333px] h-[40px] top-0 absolute left-0 z-0'
            />
          )}
          <p className='text-[#fff] dark:text-[#000] text-[20px] font-bold relative z-1 pl-[10px] top-[3px]'>
            {username}
          </p>
          <input
            type='checkbox'
            id='switch'
            checked={isDarkMode}
            onChange={() => {
              toggleTheme()
            }}
          />
          <label htmlFor='switch' className='toggle-checkbox ml-auto'>
            Toggle
          </label>
        </div>
        <div className='rounded-[17px] bg-[#F3F4F8] rounded-tl-none py-[20px] px-[10px] dark:bg-[#35363A]'>
          <div className=''>
            <h4 className='flex items-center justify-center gap-[3px] text-[2C2F34] font-bold text-[20px] dark:text-white mb-[16px]'>
              <svg
                width='19'
                height='14'
                viewBox='0 0 19 14'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
              >
                <path
                  d='M5.61095 0H4.64141C3.15914 0 2.5625 0.559349 2.5625 1.97637V13.0515H7.68987V1.97637C7.68054 0.559349 7.0839 0 5.61095 0Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
                <path
                  d='M13.5367 4.66113H12.5672C11.0849 4.66113 10.4883 5.2298 10.4883 6.6375V13.0514H15.6156V6.6375C15.6156 5.2298 15.0097 4.66113 13.5367 4.66113Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
                <path
                  d='M0.699186 12.3613H17.9458C18.328 12.3613 18.645 12.6783 18.645 13.0605C18.645 13.4427 18.328 13.7597 17.9458 13.7597H0.699186C0.316964 13.7597 0 13.4427 0 13.0512C0 12.6596 0.316964 12.3613 0.699186 12.3613Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
              </svg>
              Общая статистика
            </h4>
            <div className='flex flex-col gap-[10px]'>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='9'
                    height='12'
                    viewBox='0 0 9 12'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <path
                      d='M8.26328 6.198L7.52311 5.466C7.34716 5.316 7.24402 5.094 7.23796 4.848C7.22582 4.578 7.33503 4.308 7.53524 4.11L8.26328 3.39C8.89425 2.766 9.13087 2.166 8.93066 1.692C8.73651 1.224 8.13588 0.966 7.25009 0.966H0.910053V0.45C0.910053 0.204 0.703775 0 0.455027 0C0.206279 0 0 0.204 0 0.45V11.55C0 11.796 0.206279 12 0.455027 12C0.703775 12 0.910053 11.796 0.910053 11.55V8.622H7.25009C8.12374 8.622 8.71224 8.358 8.91246 7.884C9.11267 7.41 8.88212 6.816 8.26328 6.198Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                  </svg>
                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    Я сыграл:
                  </h5>
                </div>
                <p className='text-right text-[16px] font-[600] dark:text-white'>
                  {stats.total_matches} матчей
                </p>
              </div>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='12'
                    height='12'
                    viewBox='0 0 12 12'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <path
                      d='M5.55556 9.51656H4.22222C3.57037 9.51656 3.03704 10.1126 3.03704 10.8411V11.0066H2.44444C2.20148 11.0066 2 11.2318 2 11.5033C2 11.7748 2.20148 12 2.44444 12H9.55556C9.79852 12 10 11.7748 10 11.5033C10 11.2318 9.79852 11.0066 9.55556 11.0066H8.96296V10.8411C8.96296 10.1126 8.42963 9.51656 7.77778 9.51656H6.44444V8C6.2963 8.01987 6.14815 8.02649 6 8.02649C5.85185 8.02649 5.7037 8.01987 5.55556 8V9.51656Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M10 5.50857C10.4074 5.36571 10.7654 5.13143 11.0494 4.86857C11.6235 4.28 12 3.57714 12 2.75429C12 1.93143 11.3025 1.28571 10.4136 1.28571H10.0679C9.66667 0.525714 8.82716 0 7.85185 0H4.14815C3.17284 0 2.33333 0.525714 1.9321 1.28571H1.58642C0.697531 1.28571 0 1.93143 0 2.75429C0 3.57714 0.376543 4.28 0.950617 4.86857C1.23457 5.13143 1.59259 5.36571 2 5.50857C2.64198 6.97143 4.18519 8 6 8C7.81482 8 9.35802 6.97143 10 5.50857ZM7.75309 3.68571L7.37037 4.12C7.30864 4.18286 7.26543 4.30857 7.27161 4.39429L7.30864 4.95429C7.33333 5.29714 7.0679 5.47429 6.72222 5.34857L6.16049 5.14286C6.07407 5.11429 5.92593 5.11429 5.83951 5.14286L5.27778 5.34857C4.9321 5.47429 4.66667 5.29714 4.69136 4.95429L4.7284 4.39429C4.73457 4.30857 4.69136 4.18286 4.62963 4.12L4.24691 3.68571C4.00617 3.42286 4.11111 3.13143 4.46914 3.04571L5.05556 2.90857C5.14815 2.88571 5.25926 2.80571 5.30864 2.73143L5.6358 2.26286C5.83951 1.97143 6.16049 1.97143 6.3642 2.26286L6.69136 2.73143C6.74074 2.80571 6.85185 2.88571 6.94445 2.90857L7.53086 3.04571C7.88889 3.13143 7.99383 3.42286 7.75309 3.68571Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                  </svg>

                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    Выиграно:
                  </h5>
                </div>
                <p className='text-right text-[16px] font-[600] text-[#50C862] '>
                  {stats.wins}
                </p>
              </div>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='12'
                    height='8'
                    viewBox='0 0 12 8'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <path
                      d='M7.6532 1.74934C7.28671 1.68835 6.34208 1.69238 5.71525 1.92034C5.08825 2.14827 3.94813 2.86074 3.60615 2.97495C3.26417 3.08884 3.2356 3.545 4.00506 3.63036C4.77465 3.716 5.4586 3.23127 5.62958 3.14593C5.80058 3.06029 7.45363 3.31693 7.45363 3.31693L7.97371 3.44509L9.17279 5.06588C9.38319 4.88312 9.79932 4.4952 9.9047 4.20041C9.94316 4.09304 10.0003 3.99434 10.0629 3.90669L8.36396 1.56348C8.14721 1.68634 7.88563 1.78813 7.6532 1.74934Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M7.65232 3.68047L7.40032 3.65504C7.06969 3.60383 6.1347 3.4707 5.78372 3.4707C5.7682 3.4707 5.75595 3.47087 5.74678 3.47131C5.73267 3.47938 5.71636 3.4887 5.70037 3.49801C5.45135 3.64309 4.86778 3.98272 4.18819 3.98272C4.1137 3.98272 4.03908 3.97852 3.96647 3.97046C3.85631 3.9582 3.75947 3.93927 3.67383 3.91538C3.75497 3.95091 3.82976 4.00182 3.8937 4.06714C3.99424 4.16987 4.05645 4.29584 4.08113 4.42759C4.13963 4.41191 4.20028 4.40321 4.26234 4.40321C4.45256 4.40321 4.63055 4.478 4.76334 4.61391C4.89431 4.74767 4.96521 4.92455 4.9632 5.11168C4.9632 5.11353 4.96289 5.11541 4.96289 5.11726C5.15234 5.11787 5.32955 5.19268 5.46204 5.32796C5.59298 5.46172 5.66391 5.63858 5.66189 5.82573C5.66126 5.89027 5.65134 5.95325 5.63381 6.01379C5.76818 6.04187 5.89123 6.10873 5.98959 6.20928C6.25987 6.48563 6.25507 6.93015 5.97888 7.20045L5.84065 7.33576C5.84126 7.33576 5.84189 7.33576 5.8425 7.33576C6.07493 7.319 6.27059 7.17563 6.32536 6.95963C6.42 7.03426 6.53916 7.07909 6.66905 7.07909C6.97596 7.07909 7.22482 6.83038 7.22482 6.52332C7.22482 6.49105 7.22156 6.45971 7.21612 6.42896C7.31388 6.51416 7.44127 6.56612 7.58107 6.56612C7.88798 6.56612 8.13687 6.31723 8.13687 6.01034C8.20266 6.03781 8.2748 6.05316 8.35052 6.05316C8.65758 6.05316 8.9063 5.80428 8.9063 5.49739C8.9063 5.26433 8.79241 5.11259 8.5215 4.79916L7.65232 3.68047Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M3.64971 4.30614C3.511 4.16448 3.28385 4.16199 3.14219 4.30056L2.62938 4.80249C2.48772 4.94106 2.48524 5.16821 2.6238 5.30987C2.7625 5.45153 2.98966 5.45401 3.13131 5.31528L3.64427 4.81349C3.78576 4.67495 3.78824 4.44779 3.64971 4.30614Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M4.51982 4.85314C4.38126 4.71132 4.15411 4.70883 4.01245 4.84753L3.32866 5.51658C3.18684 5.65528 3.18452 5.88244 3.32306 6.02396C3.46162 6.16578 3.68894 6.16826 3.8306 6.02956L4.51439 5.36049C4.65604 5.22195 4.65853 4.99479 4.51982 4.85314Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M5.21898 5.56694C5.08042 5.42528 4.85326 5.42263 4.7116 5.56136L4.02781 6.23057C3.88616 6.36911 3.88367 6.59627 4.02224 6.73809C4.1608 6.8796 4.38796 6.88209 4.52978 6.74336L5.21356 6.07432C5.35522 5.93559 5.35771 5.70843 5.21898 5.56694Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M5.7466 6.44779C5.60803 6.30613 5.38088 6.30351 5.23922 6.44221L4.84031 6.83261C4.69866 6.97115 4.69617 7.19831 4.83474 7.33999C4.97344 7.48164 5.2006 7.48399 5.34225 7.34556L5.74116 6.95519C5.88284 6.81663 5.88516 6.58947 5.7466 6.44779Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M11.9682 3.23165L9.67623 0.0707252C9.62082 -0.00591541 9.51392 -0.0228138 9.43742 0.032569L8.42223 0.768788C8.34573 0.82417 8.32866 0.931092 8.38421 1.00757L10.6762 4.16865C10.7316 4.24515 10.8385 4.26222 10.9150 4.20667L11.9304 3.47059C12.0067 3.41502 12.0238 3.30812 11.9682 3.23165ZM11.1884 3.51559C11.0610 3.60805 10.8827 3.57951 10.7903 3.45212C10.6980 3.32474 10.7263 3.14662 10.8539 3.05415C10.9813 2.96167 11.1594 2.99022 11.2519 3.11746C11.3442 3.24498 11.3158 3.42327 11.1884 3.51559Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M3.39433 3.85560C3.44833 3.85560 3.50109 3.86245 3.55227 3.87407C3.12140 3.70884 3.05003 3.40659 3.03885 3.29999C3.00843 3.01293 3.19323 2.75151 3.49874 2.64972C3.62162 2.60875 3.94373 2.43311 4.25530 2.26338C4.58952 2.08105 4.95632 1.88106 5.27533 1.73395C4.87098 1.70123 4.49207 1.71503 4.28976 1.74869C4.07191 1.78499 3.82863 1.69797 3.62055 1.58594L1.90820 3.94731C1.95955 4.02442 2.00563 4.10884 2.03805 4.19976C2.08600 4.33382 2.19834 4.48710 2.32633 4.63171C2.34634 4.60595 2.36760 4.58080 2.39151 4.55739L2.90430 4.05545C3.03606 3.92666 3.21016 3.85560 3.39433 3.85560Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M3.57879 0.768647L2.56341 0.032569C2.48707 -0.0228138 2.38017 -0.00591541 2.32463 0.0707252L0.0326021 3.23167C-0.0229447 3.30815 -0.00571819 3.41505 0.0706178 3.47062L1.08584 4.20669C1.16234 4.26224 1.26924 4.24518 1.32464 4.16852L3.61667 1.00759C3.67219 0.931116 3.65513 0.824194 3.57879 0.768647ZM2.90027 1.12180C2.80795 1.24902 2.62966 1.27757 2.50228 1.18511C2.37474 1.09276 2.34633 0.914499 2.43881 0.787116C2.53113 0.659733 2.70942 0.631186 2.83681 0.723647C2.96435 0.816132 2.99259 0.994257 2.90027 1.12180Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                  </svg>

                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    Ничьих:
                  </h5>
                </div>
                <p className='text-right text-[16px] font-[600] text-[#F5950F]'>
                  {stats.draws}
                </p>
              </div>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='12'
                    height='12'
                    viewBox='0 0 12 12'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <path
                      d='M0.332067 0.332059C-0.110689 0.774816 -0.110689 1.49265 0.332067 1.93541L4.39665 5.99997L0.332067 10.0646C-0.110689 10.5074 -0.110689 11.2252 0.332067 11.668C0.774812 12.1107 1.49266 12.1107 1.9354 11.668L5.99998 7.6033L10.0646 11.668C10.5074 12.1107 11.2252 12.1107 11.668 11.668C12.1107 11.2252 12.1107 10.5074 11.668 10.0646L7.6033 5.99997L11.668 1.93542C12.1107 1.49267 12.1107 0.774827 11.668 0.332082C11.2251 -0.110675 10.5074 -0.110675 10.0646 0.332082L5.99998 4.39665L1.9354 0.332059C1.49266 -0.110686 0.774812 -0.110686 0.332067 0.332059Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                  </svg>

                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    Поражений:
                  </h5>
                </div>
                <p className='text-right text-[16px] font-[600] text-[#F50F0F]'>
                  {stats.losses}
                </p>
              </div>
            </div>
          </div>
          <div className='mt-[20px] pt-[20px] border-t-[2px] border-[#C3C3C3] dark:border-[#575757]'>
            <h4 className='flex items-center justify-center gap-[3px] text-[2C2F34] font-bold text-[20px] dark:text-white'>
              <svg
                width='14'
                height='14'
                viewBox='0 0 14 14'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
              >
                <path
                  d='M3.09133 8.41113H1.32391C0.595759 8.41113 0 9.00689 0 9.73504V13.0448C0 13.4089 0.297879 13.7068 0.661954 13.7068H3.09133C3.4554 13.7068 3.75328 13.4089 3.75328 13.0448V9.07309C3.75328 8.70901 3.4554 8.41113 3.09133 8.41113Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
                <path
                  d='M7.50344 5.7627H5.73602C5.00787 5.7627 4.41211 6.35845 4.41211 7.0866V13.0442C4.41211 13.4083 4.70999 13.7061 5.07406 13.7061H8.16539C8.52947 13.7061 8.82734 13.4083 8.82734 13.0442V7.0866C8.82734 6.35845 8.23821 5.7627 7.50344 5.7627Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
                <path
                  d='M11.9157 10.3965H10.1483C9.78421 10.3965 9.48633 10.6944 9.48633 11.0584V13.0443C9.48633 13.4084 9.78421 13.7063 10.1483 13.7063H12.5777C12.9417 13.7063 13.2396 13.4084 13.2396 13.0443V11.7204C13.2396 10.9922 12.6438 10.3965 11.9157 10.3965Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
                <path
                  d='M8.61098 2.3549C8.81619 2.1497 8.89562 1.90477 8.82943 1.69295C8.76323 1.48112 8.55802 1.32887 8.26676 1.28254L7.63129 1.17662C7.60481 1.17662 7.54523 1.13029 7.532 1.10381L7.18116 0.402137C6.91638 -0.134046 6.314 -0.134046 6.04922 0.402137L5.69838 1.10381C5.69176 1.13029 5.63219 1.17662 5.60571 1.17662L4.97023 1.28254C4.67897 1.32887 4.48039 1.48112 4.40757 1.69295C4.34138 1.90477 4.42081 2.1497 4.62602 2.3549L5.11586 2.85137C5.14234 2.87123 5.1622 2.95066 5.15558 2.97714L5.01657 3.58614C4.91066 4.04289 5.08276 4.24809 5.1953 4.32753C5.30783 4.40696 5.55275 4.51287 5.95654 4.27457L6.5523 3.92373C6.57878 3.90388 6.66483 3.90388 6.69131 3.92373L7.28045 4.27457C7.4658 4.3871 7.61805 4.4202 7.7372 4.4202C7.87621 4.4202 7.9755 4.36724 8.03508 4.32753C8.14761 4.24809 8.31972 4.04289 8.21381 3.58614L8.0748 2.97714C8.06818 2.94404 8.08804 2.87123 8.11452 2.85137L8.61098 2.3549Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
              </svg>
              Достижения
            </h4>
            <div className='flex flex-col gap-[10px]'>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='12'
                    height='13'
                    viewBox='0 0 12 13'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <path
                      d='M2.6795 1.31323L2.72246 3.63895C2.7286 3.95805 2.52609 4.38146 2.26836 4.57169L0.746517 5.72535C-0.22918 6.46172 -0.0696325 7.36378 1.0963 7.73197L3.07837 8.35175C3.40974 8.45607 3.75952 8.81813 3.84543 9.15563L4.31794 10.9598C4.69226 12.3834 5.62501 12.5246 6.3982 11.2727L7.47822 9.52382C7.67459 9.20472 8.14096 8.9654 8.50914 8.98381L10.5587 9.08813C12.0253 9.16177 12.4426 8.31494 11.4853 7.1981L10.2703 5.78671C10.0433 5.52284 9.93894 5.03193 10.0433 4.70056L10.6692 2.71234C11.0312 1.54642 10.3808 0.902087 9.22097 1.28255L7.41072 1.87778C7.10389 1.97597 6.64366 1.90847 6.38593 1.71824L4.4959 0.355942C3.47111 -0.374297 2.65496 0.055255 2.6795 1.31323Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                    <path
                      d='M0.134062 11.3346L1.99341 9.47526C2.17137 9.29731 2.46592 9.29731 2.64388 9.47526C2.82183 9.65322 2.82183 9.94777 2.64388 10.1257L0.784528 11.9851C0.692481 12.0771 0.575888 12.1201 0.459295 12.1201C0.342702 12.1201 0.226109 12.0771 0.134062 11.9851C-0.0438957 11.8071 -0.0438957 11.5126 0.134062 11.3346Z'
                      fill={isDarkMode ? '#fff' : '#2C2F34'}
                    />
                  </svg>

                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    MVP:
                  </h5>
                </div>
                <p className='text-right font-[600] dark:text-white'>{stats.mvp_count} раз</p>
              </div>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='12'
                    height='12'
                    viewBox='0 0 12 12'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <g clip-path='url(#clip0_3130_2212)'>
                      <path
                        d='M6.00002 0C2.69153 0 0 2.69149 0 6.00022C0 9.30871 2.69149 12 6.00002 12C9.30867 12 12 9.30875 12 6.00022C12 2.69149 9.30867 0 6.00002 0ZM2.14714 10.0275C1.08543 9.01149 0.422175 7.58211 0.422175 6.00022C0.422175 5.96682 0.424046 5.93426 0.424643 5.90149L1.97827 6.43645L3.06534 9.23868L2.14714 10.0275ZM3.41908 1.79698L6.24003 0.782049L8.25946 2.66593L6.60006 5.04174L3.51307 4.45507L3.41908 1.79698ZM9.72551 10.1468C9.60883 10.252 9.48761 10.3519 9.36273 10.447L7.04369 11.4377L5.52466 9.85453L7.49636 7.63549L10.1304 7.95954L9.72551 10.1468ZM10.4684 2.6649C11.1652 3.59583 11.5783 4.75061 11.5783 6.00018C11.5783 6.03358 11.5762 6.06678 11.5756 6.09994L11.2613 6.0204L10.3126 3.34503L10.4684 2.6649Z'
                        fill={isDarkMode ? '#fff' : '#2C2F34'}
                      />
                    </g>
                    <defs>
                      <clipPath id='clip0_3130_2212'>
                        <rect width='12' height='12' fill='white' />
                      </clipPath>
                    </defs>
                  </svg>

                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    Лучший гол:
                  </h5>
                </div>
                <p className='text-right font-[600] dark:text-white'>{stats.best_goal_count} раз</p>
              </div>
              <div className='flex items-center justify-between'>
                <div className='flex items-center gap-[3px]'>
                  <svg
                    width='12'
                    height='12'
                    viewBox='0 0 12 12'
                    fill='none'
                    xmlns='http://www.w3.org/2000/svg'
                  >
                    <g clip-path='url(#clip0_3130_2224)'>
                      <path
                        d='M11.3378 5.54238C11.1429 5.19645 10.7894 4.98145 10.4157 4.98145C10.2554 4.98145 10.0978 5.02248 9.95997 5.10022L9.2814 5.48232C9.28608 5.54397 9.28317 5.60264 9.27377 5.65915C9.26048 5.73859 9.23198 5.81164 9.19011 5.8785L10.1076 5.36181C10.2039 5.30737 10.3095 5.28173 10.4158 5.28173C10.6714 5.28173 10.9306 5.4309 11.0764 5.68973C11.2827 6.05609 11.4007 6.50905 11.0717 6.69435L8.44762 8.54527C8.42965 8.83321 8.38197 9.16495 8.27052 9.40657C8.19958 9.37686 8.12392 9.35651 8.04457 9.35224L6.5737 9.27013C6.56158 9.32253 6.54807 9.37218 6.53202 9.41812C6.52421 9.44059 6.51462 9.46075 6.50586 9.48204C6.5475 9.50745 6.58465 9.53912 6.61904 9.57352L8.02792 9.65212C8.0471 9.65329 8.06525 9.65721 8.08345 9.66088C8.14016 9.67243 8.19256 9.6955 8.23673 9.72872C8.2772 9.75941 8.31084 9.79792 8.33644 9.84171C8.37283 9.90386 8.3922 9.97698 8.38767 10.0544L8.32394 11.1969C8.31239 11.3998 8.14427 11.557 7.94331 11.557C7.9361 11.557 7.92885 11.5566 7.92183 11.5562L6.87048 11.4975C6.84741 11.5499 6.81925 11.5995 6.78312 11.6431C6.73619 11.6996 6.6793 11.7469 6.61497 11.7841L7.90522 11.856C7.91794 11.8568 7.93085 11.8572 7.94354 11.8572C8.3048 11.8572 8.60373 11.5745 8.62389 11.2132L8.68762 10.0708C8.69781 9.89166 8.63759 9.71943 8.51973 9.58454C8.63072 9.36912 8.70306 9.08001 8.73669 8.70897L11.2345 6.9474C11.561 6.75256 11.7561 6.28495 11.3378 5.54238Z'
                        fill={isDarkMode ? '#fff' : '#2C2F34'}
                      />
                      <path
                        d='M8.911 4.68165C8.94166 4.72053 8.96612 4.75836 8.99293 4.79661C9.04608 4.87208 9.09222 4.94596 9.13072 5.0186C9.14364 4.76837 9.16221 4.49405 9.19053 4.19871L9.22515 3.83617L9.21204 3.83734L9.37506 2.09552C9.41259 1.84253 9.35513 1.58947 9.2128 1.38187C9.06522 1.16664 8.84429 1.02597 8.59134 0.985725C8.54362 0.978099 8.49496 0.974285 8.44667 0.974285C8.26176 0.974285 8.08813 1.02812 7.94093 1.12284C7.87211 0.670297 7.50224 0.315266 7.04399 0.296691C7.0315 0.296125 7.01877 0.295898 7.00647 0.295898C6.61882 0.295898 6.28512 0.534687 6.13735 0.881186C6.12836 0.873749 6.11817 0.868388 6.10938 0.861328C6.14671 0.952426 6.16668 1.04991 6.17488 1.15025C6.17684 1.17566 6.18209 1.20031 6.18228 1.22591L6.26401 2.51926L6.35624 1.25287C6.37131 0.884773 6.65967 0.595923 7.00609 0.595923C7.01451 0.595923 7.02308 0.596112 7.0315 0.596527C7.38925 0.6111 7.66662 0.928642 7.65118 1.30557L7.58375 2.96282L7.79626 1.85529C7.85002 1.51687 8.13072 1.27427 8.44626 1.27427C8.4785 1.27427 8.51097 1.27692 8.54362 1.28209C8.89707 1.33838 9.13578 1.68586 9.07651 2.05856L8.87887 4.17092L8.89118 4.16975C8.87634 4.3253 8.8646 4.47344 8.85422 4.61773C8.87389 4.63884 8.89322 4.65926 8.911 4.68165Z'
                        fill={isDarkMode ? '#fff' : '#2C2F34'}
                      />
                      <path
                        d='M0.442391 2.88434L1.02092 5.35219C1.04633 5.46051 1.10058 5.55357 1.17088 5.63009C1.20334 6.04647 1.23551 6.51137 1.23551 6.71191C1.23551 7.0763 1.97868 9.37098 2.50572 9.84992C2.59225 9.7854 2.69505 9.74081 2.80982 9.72952L4.34256 9.57466L4.47149 9.56156L4.52661 9.5559L4.6695 9.54163L4.77555 9.5309L5.00596 9.50784L5.15874 9.4924L6.1179 9.39563L6.12145 9.39526C6.14237 9.39292 6.16324 9.39193 6.18378 9.39193C6.22776 9.39193 6.27058 9.39756 6.31222 9.4062C6.31494 9.407 6.31728 9.40775 6.32022 9.40855C6.32041 9.40775 6.32083 9.40738 6.32101 9.40658C6.34038 9.36064 6.3568 9.31156 6.37009 9.25919C6.44028 8.98375 6.43442 8.63245 6.40566 8.32986L8.8057 6L8.91926 5.88972C8.94645 5.86813 8.96891 5.84449 8.98907 5.82003C9.13551 5.64104 9.09561 5.39191 8.97367 5.14704C8.93455 5.06893 8.88725 4.9915 8.83523 4.91686C8.80906 4.87922 8.78207 4.84237 8.75353 4.80651C8.5799 4.58712 8.32914 4.47024 8.08669 4.47024C7.93172 4.47024 7.7798 4.51804 7.6537 4.61774L6.37636 5.62843C6.3109 5.24154 6.19847 4.48021 6.14078 3.53981L6.12768 3.54314L5.98188 1.23283C5.98188 1.20206 5.97686 1.17261 5.97323 1.1426C5.96364 1.05932 5.94227 0.980828 5.90901 0.908304C5.87258 0.829324 5.82494 0.757593 5.76593 0.697188C5.63878 0.567468 5.46662 0.486827 5.27586 0.486525C5.27567 0.486525 5.27525 0.486525 5.27506 0.486525C4.88485 0.486525 4.56844 0.819659 4.56798 1.23128L4.54695 1.86387L4.54197 2.015L4.53676 2.16896L4.52698 2.46102L4.49168 2.15831L4.47409 2.00643L4.4565 1.85493L4.31802 0.663399C4.27373 0.282205 3.96386 0 3.60788 0C3.58191 0 3.5559 0.00135911 3.52958 0.00456813C3.14163 0.0496454 2.86581 0.417739 2.91349 0.826719L3.07817 2.79306L2.76606 1.22502C2.6992 0.888597 2.42598 0.651922 2.12807 0.651922C2.09171 0.651922 2.05487 0.655546 2.01798 0.662795C1.67986 0.730033 1.46671 1.09069 1.54176 1.46849L1.91544 3.69974L1.6577 2.5995C1.59016 2.31185 1.33378 2.11761 1.05052 2.11761C1.00333 2.11761 0.955419 2.12309 0.907623 2.13422C0.572111 2.21275 0.363713 2.54868 0.442391 2.88434Z'
                        fill={isDarkMode ? '#fff' : '#2C2F34'}
                      />
                      <path
                        d='M6.72237 11.2081L6.60624 10.0583L6.59706 9.96635C6.59487 9.94524 6.59 9.92531 6.58495 9.90537C6.56992 9.84554 6.54232 9.79159 6.50521 9.74583C6.4778 9.71219 6.44598 9.68369 6.40981 9.66002C6.38108 9.64107 6.34978 9.62638 6.31675 9.61524C6.28058 9.60275 6.24226 9.59569 6.20262 9.59357C6.19635 9.59316 6.19008 9.5918 6.18363 9.5918C6.16977 9.5918 6.15569 9.5924 6.14142 9.59395L5.70832 9.63755L5.1618 9.69286L4.70201 9.73922L4.59664 9.74998L4.43917 9.7658L4.28563 9.78105L2.82933 9.92806C2.80227 9.93078 2.77648 9.93648 2.75145 9.94392C2.69622 9.96049 2.646 9.9879 2.60346 10.0238C2.57492 10.0477 2.55106 10.0766 2.52988 10.1071C2.47581 10.1855 2.44678 10.2815 2.45716 10.3836L2.58247 11.6257C2.60417 11.84 2.7849 11.9998 2.99613 11.9998C3.0101 11.9998 3.02407 11.9994 3.03837 11.9979L5.67894 11.7312L6.35027 11.6634C6.39758 11.6585 6.44118 11.6446 6.48203 11.6257C6.55025 11.5942 6.60752 11.5453 6.64935 11.4846C6.7036 11.4068 6.73271 11.3106 6.72237 11.2081ZM4.52894 10.7327C4.47545 10.7509 4.42365 10.7691 4.37559 10.7872C4.31862 10.8089 4.26818 10.8304 4.22175 10.8521C4.12604 10.8965 4.05412 10.9399 4.02547 10.9805C3.85618 11.2204 4.25153 11.3418 4.25153 11.3418C3.85275 11.2685 3.43958 11.083 3.75365 10.6347C3.83731 10.5153 4.02215 10.4437 4.24678 10.4013C4.29574 10.3921 4.34599 10.3839 4.39847 10.3774C4.44812 10.3714 4.49836 10.3659 4.54978 10.3616C5.1299 10.3159 5.79556 10.3964 5.79556 10.3964C5.79556 10.3964 5.0559 10.5556 4.52894 10.7327Z'
                        fill={isDarkMode ? '#fff' : '#2C2F34'}
                      />
                    </g>
                    <defs>
                      <clipPath id='clip0_3130_2224'>
                        <rect width='12' height='12' fill='white' />
                      </clipPath>
                    </defs>
                  </svg>

                  <h5 className='text-[16px] font-[600] dark:text-white'>
                    Лучший сейв:
                  </h5>
                </div>
                <p className='text-right font-[600] dark:text-white'>{stats.best_save_count} раз</p>
              </div>
            </div>
          </div>
          <div className='mt-[20px] pt-[20px] border-t-[2px] border-[#C3C3C3] dark:border-[#575757]'>
            <h4 className='flex items-center justify-center gap-[3px] text-[2C2F34] font-bold text-[20px] dark:text-white'>
              <svg
                width='14'
                height='14'
                viewBox='0 0 14 14'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
              >
                <path
                  d='M13.6709 6.21482L12.6066 5.14922C12.4246 4.96695 12.2776 4.60941 12.2776 4.35704V2.84276C12.2776 2.22584 11.7734 1.72108 11.1573 1.72108H9.6519C9.39984 1.72108 9.04275 1.57386 8.8607 1.39159L7.79644 0.325989C7.36233 -0.108663 6.64815 -0.108663 6.21404 0.325989L5.13578 1.39159C4.96073 1.57386 4.60364 1.72108 4.34458 1.72108H2.83921C2.22305 1.72108 1.71893 2.22584 1.71893 2.84276V4.35003C1.71893 4.6024 1.57189 4.95994 1.38985 5.14221L0.325581 6.20781C-0.108527 6.64246 -0.108527 7.35754 0.325581 7.79219L1.38985 8.85779C1.57189 9.04006 1.71893 9.3976 1.71893 9.64998V11.1572C1.71893 11.7742 2.22305 12.2789 2.83921 12.2789H4.34458C4.59664 12.2789 4.95373 12.4261 5.13578 12.6084L6.20004 13.674C6.63415 14.1087 7.34833 14.1087 7.78243 13.674L8.8467 12.6084C9.02874 12.4261 9.38583 12.2789 9.6379 12.2789H11.1433C11.7594 12.2789 12.2635 11.7742 12.2635 11.1572V9.64998C12.2635 9.3976 12.4106 9.04006 12.5926 8.85779L13.6569 7.79219C14.112 7.36455 14.112 6.64947 13.6709 6.21482ZM4.19754 4.90386C4.19754 4.51828 4.51262 4.2028 4.89772 4.2028C5.28281 4.2028 5.59789 4.51828 5.59789 4.90386C5.59789 5.28943 5.28981 5.60491 4.89772 5.60491C4.51262 5.60491 4.19754 5.28943 4.19754 4.90386ZM5.26881 9.48172C5.16378 9.58688 5.03075 9.63595 4.89772 9.63595C4.76468 9.63595 4.63165 9.58688 4.52663 9.48172C4.32357 9.27842 4.32357 8.94191 4.52663 8.73861L8.72767 4.5323C8.93072 4.32899 9.2668 4.32899 9.46985 4.5323C9.6729 4.7356 9.6729 5.07211 9.46985 5.27541L5.26881 9.48172ZM9.09876 9.81122C8.70666 9.81122 8.39159 9.49574 8.39159 9.11017C8.39159 8.72459 8.70666 8.40911 9.09176 8.40911C9.47686 8.40911 9.79193 8.72459 9.79193 9.11017C9.79193 9.49574 9.48386 9.81122 9.09876 9.81122Z'
                  fill={isDarkMode ? '#fff' : '#2C2F34'}
                />
              </svg>
              Процент побед
            </h4>
            <p className={`text-[32px] font-black text-center ${calculateWinRate() >= 50 ? 'text-[#50C862]' : 'text-[#F50F0F]'}`}>
              {calculateWinRate()}%
            </p>
          </div>
        </div>
        <button className='bg-[#697281] text-[#fff] w-full mt-[28px] rounded-[17px] text-[20px] h-[40px] font-bold'>
          История записей
        </button>
      </div>
      <Navbar />
    </div>
  )
}